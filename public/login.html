<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QgdSalesUrs - Login</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Arial,sans-serif;background:linear-gradient(135deg,#0a1628 0%,#1a2744 50%,#0d1b2a 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden}

.bubbles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;overflow:hidden}
.bubble{position:absolute;bottom:-30px;background:rgba(0,150,255,.06);border-radius:50%;animation:rise linear infinite}
@keyframes rise{0%{transform:translateY(0) scale(1);opacity:.5}100%{transform:translateY(-110vh) scale(.2);opacity:0}}

.login-box{
  background:linear-gradient(180deg,#1c2636 0%,#182030 100%);
  padding:2rem 2.2rem 2.2rem;border-radius:18px;
  box-shadow:0 25px 80px rgba(0,0,0,.6),0 0 0 1px rgba(255,255,255,.05);
  width:92%;max-width:440px;position:relative;z-index:10;
}

.logo-area{text-align:center;margin-bottom:1rem}
.logo-area .icon{font-size:3.5rem;margin-bottom:.3rem}
h1{text-align:center;color:#4da6ff;margin-bottom:.15rem;font-size:1.6rem;font-weight:800;letter-spacing:1px;text-shadow:0 2px 10px rgba(77,166,255,.3)}
.subtitle{text-align:center;color:#8b949e;font-size:.78rem;margin-bottom:1.2rem;letter-spacing:.5px}

label{display:block;font-size:.8rem;color:#8b949e;margin-bottom:.2rem;margin-top:.7rem;text-transform:uppercase;letter-spacing:.5px;font-weight:600}
input{
  width:100%;padding:.65rem .8rem;border:2px solid #30363d;border-radius:8px;
  font-size:.95rem;transition:all .2s;background:#0d1117;color:#e6edf3;
}
input::placeholder{color:#484f58}
input:focus{outline:none;border-color:#4da6ff;box-shadow:0 0 0 3px rgba(77,166,255,.1)}
button[type="submit"]{
  width:100%;padding:.8rem;
  background:linear-gradient(135deg,#1a6bc4,#2d8cf0,#1a6bc4);
  color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;
  margin-top:1.2rem;transition:all .2s;font-weight:700;letter-spacing:.5px;
  box-shadow:0 4px 20px rgba(45,140,240,.3);text-shadow:0 1px 2px rgba(0,0,0,.3);
}
button[type="submit"]:hover{background:linear-gradient(135deg,#2d8cf0,#4da6ff,#2d8cf0);transform:translateY(-1px);box-shadow:0 6px 25px rgba(45,140,240,.4)}
button[type="submit"]:active{transform:translateY(0)}
.error{color:#e74c3c;font-size:.8rem;text-align:center;margin-top:.7rem;display:none}
.footer{text-align:center;font-size:.65rem;color:#3d444d;margin-top:.8rem;letter-spacing:.3px}

@media(max-width:480px){
  .login-box{padding:1.3rem 1.3rem 1.8rem;max-width:98%}
  h1{font-size:1.35rem}
}
</style>
</head>
<body>

<div class="bubbles" id="bubbles"></div>

<div class="login-box">
  <div class="logo-area">
    <div class="icon">üç∫</div>
  </div>
  <h1>QgdSalesUrs</h1>
  <p class="subtitle">Quatro Grup Distribution ¬∑ Ursus Division</p>

  <form id="loginForm">
    <label for="username">Utilizator</label>
    <input id="username" type="text" placeholder="Utilizator" required autofocus>
    <label for="password">ParolƒÉ</label>
    <input id="password" type="password" placeholder="ParolƒÉ" required>
    <button type="submit">IntrƒÉ √Æn aplica»õie</button>
  </form>
  <p id="loginError" class="error"></p>
  <p class="footer">¬© 2026 QgdSalesUrs ¬∑ Quatro Grup Distribution</p>
</div>

<script>
/* Background bubbles */
(function() {
  const c = document.getElementById('bubbles');
  for (let i = 0; i < 20; i++) {
    const b = document.createElement('div');
    b.className = 'bubble';
    const s = 8 + Math.random() * 25;
    b.style.cssText = `width:${s}px;height:${s}px;left:${Math.random()*100}%;animation-duration:${5+Math.random()*10}s;animation-delay:${Math.random()*6}s;`;
    c.appendChild(b);
  }
})();

/* Login */
document.getElementById("loginForm").addEventListener("submit", async e => {
  e.preventDefault();
  const err = document.getElementById("loginError");
  err.style.display = "none";
  try {
    const r = await fetch("/api/login", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({
        username: document.getElementById("username").value.trim(),
        password: document.getElementById("password").value
      })
    });
    const d = await r.json();
    if (!r.ok || !d.ok) throw new Error(d.error || "Autentificare esuata");
    if (d.previous_login) {
      try { sessionStorage.setItem("previous_login", d.previous_login); } catch(e) {}
    }
    if (d.csrf_token) {
      try { sessionStorage.setItem("csrf_token", d.csrf_token); } catch(e) {}
    }
    window.location.href = "/index.html";
  } catch(ex) {
    err.textContent = ex.message;
    err.style.display = "block";
  }
});
</script>
</body>
</html>
